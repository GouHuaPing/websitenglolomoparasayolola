:root {
  --bg:#0f1724;
  --paper:#fffef9;
  --accent:#ff6b81;
  --muted:#6b7280;
  --gold:#ffd88a;
}

* { box-sizing:border-box; }
html,body { height:100%; }

body {
  margin:0;
  font-family:'Georgia','Times New Roman',serif;
  background: radial-gradient(1200px 600px at 10% 10%, #10203a 0%, rgba(16,32,58,0) 30%),
              radial-gradient(1000px 500px at 90% 90%, #201422 0%, rgba(32,20,34,0) 28%),
              var(--bg);
  color:#111827;
  display:flex;
  align-items:center;
  justify-content:center;
  padding:3rem;
}

.stage { width:760px; max-width:95vw; perspective:1200px; }

.envelope {
  width:600px;
  max-width:90vw;
  margin:0 auto;
  position:relative;
  transform-style:preserve-3d;
  transition:transform 900ms cubic-bezier(.2,.9,.3,1);
}

.envelope .back, .envelope .flap, .letter {
  position:relative;
  width:100%;
  height:360px;
  border-radius:12px;
  box-shadow:0 10px 30px rgba(2,6,23,0.6);
  overflow:hidden;
  transform-origin:top center;
  background:linear-gradient(180deg,#fdeed9 0%, #fffefc 50%);
}

.back {
  background:linear-gradient(180deg,#fdeed9 0%, #fffefc 50%);
  padding:2.2rem 2.4rem;
  display:flex;
  align-items:flex-end;
  justify-content:center;
}

.seal {
  position:absolute;
  top:50%;
  left:50%;
  transform:translate(-50%,-60%);
  width:120px;
  height:120px;
  border-radius:999px;
  background:radial-gradient(circle at 35% 30%, #ffb4c4, #ff6b81 50%);
  display:flex;
  align-items:center;
  justify-content:center;
  box-shadow:0 10px 40px rgba(255,100,130,0.15), inset 0 -6px 18px rgba(0,0,0,0.07);
}
.seal:after {
  content:"â™¥";
  font-size:40px;
  color:white;
  filter:drop-shadow(0 3px 6px rgba(0,0,0,0.25));
}

.flap {
  position:absolute;
  top:0;
  left:0;
  height:300px;
  transform-origin:top center;
  background:linear-gradient(180deg,#ffeef2 0%, #fff 60%);
  border-bottom-left-radius:140px 70px;
  border-bottom-right-radius:140px 70px;
  display:flex;
  align-items:flex-start;
  justify-content:center;
  padding-top:48px;
  z-index:6;
  transition:transform 800ms cubic-bezier(.2,.9,.3,1);
}
.flap .stamp {
  position:absolute;
  top:22px;
  right:28px;
  width:72px;
  height:52px;
  border-radius:6px;
  background:linear-gradient(180deg,#fff 0%, #ffe9ec 100%);
  display:flex;
  align-items:center;
  justify-content:center;
  font-weight:bold;
  color:var(--accent);
  box-shadow:0 6px 16px rgba(0,0,0,0.12);
  transform:rotate(-12deg);
}

.letter {
  position:absolute;
  top:28px;
  left:30px;
  right:30px;
  height:300px;
  z-index:3;
  background:linear-gradient(180deg,var(--paper) 0%, #fff 100%);
  border-radius:8px;
  padding:36px 48px;
  transform:translateY(40px) rotateX(8deg);
  box-shadow:0 20px 60px rgba(4,8,20,0.45);
  transition:transform 900ms cubic-bezier(.2,.9,.3,1), opacity 300ms;
  opacity:0;
}

.letter.open {
  transform:translateY(-40px) rotateX(0deg);
  opacity:1;
  z-index:8;
}

.letter h1 {
  font-size:28px;
  margin:0 0 8px 0;
  color:#2b2b2b;
  letter-spacing:0.6px;
}

.letter p {
  color:#33343a;
  line-height:1.55;
  margin:12px 0;
  font-size:16px;
}

.controls {
  display:flex;
  gap:12px;
  justify-content:center;
  margin-top:20px;
}

.btn {
  background:transparent;
  border:2px solid rgba(255,255,255,0.06);
  padding:10px 16px;
  border-radius:999px;
  cursor:pointer;
  font-weight:600;
  color:var(--gold);
  backdrop-filter:blur(6px);
  transition:transform 220ms ease, box-shadow 220ms ease;
  box-shadow:0 6px 18px rgba(0,0,0,0.35);
}
.btn:active { transform:translateY(2px); }

.small { font-size:13px; color:var(--muted); }

.hearts {
  position:absolute;
  inset:0;
  pointer-events:none;
  z-index:20;
}

.heart {
  position:absolute;
  width:18px;
  height:18px;
  transform:translate(-50%,-50%) scale(0.9) rotate(-20deg);
  opacity:0;
  animation:rise 2600ms linear infinite;
}
.heart:before, .heart:after {
  content:'';
  position:absolute;
  width:100%;
  height:100%;
  background:var(--accent);
  border-radius:50px 50px 0 0;
  transform-origin:center bottom;
}
.heart:before { transform:translateX(50%) rotate(45deg); }
.heart:after { transform:translateX(-50%) rotate(-45deg); }

@keyframes rise {
  0% { transform:translate(-50%,40vh) scale(0.6); opacity:0; }
  10% { opacity:1; }
  100% { transform:translate(-50%,-40vh) scale(1); opacity:0; }
}

.envelope.open .flap { transform:rotateX(-180deg); }
.envelope.open .back { transform:translateY(40px); }

@media (max-width:520px) {
  .letter { padding:22px; }
  .flap { padding-top:24px; }
}
